#!/bin/bash

# ================================================================== #
#                                   db                               #
#                                                                    #
#                ,p6"bo   ,6"Yb.  `7MM  `7MMpMMMb.                   #
#               6M'  OO  8)   MM    MM    MM    MM                   #
#               8M        ,pm9MM    MM    MM    MM                   #
#               YM.    , 8M   MM    MM    MM    MM                   #
#                YMbmd'  `Moo9^Yo..JMML..JMML  JMML.                 #
#                                                                    #
# ================================================================== #
#     This Program Was Made January 2025 By Rhett Applestone         #
#                                                                    #
#                            MIT License                             #
#                Copyright (c) 2025 Rhett Applestone                 #
# ================================================================== #


# ================== Installing Needed Programs ==================== #

# Making Making everything look pretty
cat ~/cain/files/cai
if [ $? -ne 0 ]; then
	echo "Error has occured printing cain ascii art in ~/cain/files/cai" && exit 1
fi

# Update to most reecent apt repos
sudo apt update -y

# Text editor I use
sudo apt install micro -y

# Getting clipboard working right
sudo apt install xclip -y

# Getting program I use for keybindings
sudo apt install input-remapper -y

# Getting background I like
sudo apt install mint-backgrounds-victoria -y

# Installing git and configuring it
sudo apt install git -y
git config --global user.name "Rhett Applestone"
git config --global user.email "rhettapples@google-email.com"

# ================ Putting Files In The Right Places =============== #

# Loading configs for cinnamon desktop enviornment
dconf load / < ~/cain/files/cinnamon/cinnamon-settings

# Loading configs for cinnamon menu settings
cp ~/cain/files/cinnamon/0.json ~/.config/cinnamon/spices/menu@cinnamon.org/0.json 

#Making correct directories for input-remapper
mkdir ~/.config/input-remapper-2
mkdir ~/.config/input-remapper-2/presets
mkdir ~/.config/input-remapper-2/presets/AT\ Translated\ Set\ 2\ keyboard


# Loading keybindings for input-remapper
cp ~/cain/files/input-remapper/rhett-keybindings.json ~/.config/input-remapper-2/presets/AT\ Translated\ Set\ 2\ keyboard/rhett-keybindings.json

# Loading config file for input-remapper
cp ~/cain/files/input-remapper/config.json ~/.config/input-remapper-2/config.json

# Starting and auto loading input-remapper and keybindings
sudo systemctl start input-remapper
sudo input-remapper-control --command autoload

# Loading my .bashrc file
cp ~/cain/files/dotfiles/.bashrc ~/.bashrc

# Making bash see the new .bashrc file
source ~/.bashrc

# Making a directory to put micro bindings in
mkdir ~/.config/micro
mkdir ~/.config/micro/buffers

# Loading micro keybindings
cp ~/cain/files/micro/bindings.json ~/.config/micro/bindings.json

# Loading micro settings
cp ~/cain/files/micro/settings.json ~/.config/micro/settings.json

# Copying cain to the user's $PATH so it can be executed
sudo cp cain /usr/local/bin/cain

echo -e "\ncain is installed"


sleep 1

for i in $(seq 0 4);
do	
    echo "System will reboot in $((5 - $i)) seconds"
    sleep 1
done

reboot
# ================================================================== #

